# Task Breakdown: Tours Overview (Home Page)

> **Generated from**: `tdd-tours-overview.md` (v2.0)  
> **Feature**: Tours Overview Screen (SCR-003)  
> **Routes**: `/` and `/tours`  
> **Last Updated**: 2026-01-31

---

## Overview

This checklist breaks down the Tours Overview feature into actionable, granular tasks (1-4 hours each). Tasks are organized by implementation phase with clear dependencies.

**Estimated Total Effort**: 35-40 hours  
**Team Size**: 1-2 developers  
**Sprint Duration**: 2-3 sprints

---

## Phase 1: Database Schema & Migration (2-3 hours)

### 1.1 Schema Updates

- [x] **Task 1.1**: [DB] Update `apps/server/prisma/schema.prisma` - Add new fields to Tour model âœ…
  - Add `difficulty Difficulty? @default(EASY)` field
  - Add `featured Boolean @default(false)` field
  - Add `reviewCount Int @default(0) @map("review_count")` field
  - Add `createdAt DateTime @default(now()) @map("created_at")` field
  - Add `updatedAt DateTime @updatedAt @map("updated_at")` field
  - **Estimated**: 30 min

- [x] **Task 1.2**: [DB] Add `Difficulty` enum to schema âœ…
  ```prisma
  enum Difficulty {
    EASY
    MODERATE
    CHALLENGING
  }
  ```
  - **Estimated**: 10 min

- [x] **Task 1.3**: [DB] Add database indexes for performance optimization âœ…
  - `@@index([location])`
  - `@@index([priceAdult])`
  - `@@index([ratingAverage])`
  - `@@index([featured])`
  - `@@index([createdAt])`
  - `@@index([difficulty])`
  - **Estimated**: 15 min

### 1.2 Migration & Data Setup

- [x] **Task 1.4**: [DB] Generate and run Prisma migration âœ…
  ```bash
  cd apps/server
  pnpm prisma migrate dev --name add_tour_overview_fields
  pnpm prisma generate
  ```
  - Review generated SQL migration file
  - Verify all columns and indexes created correctly
  - **Estimated**: 30 min

- [ ] **Task 1.5**: [DB] Create database trigger for review_count maintenance
  - Write SQL function `update_tour_review_count()`
  - Create trigger on INSERT/DELETE on `reviews` table
  - Test trigger with sample data
  - **Estimated**: 45 min

- [ ] **Task 1.6**: [DB] Update existing tour records with review counts
  - Write one-time UPDATE query to populate `review_count`
  - Verify counts match actual review records
  - **Estimated**: 20 min

- [x] **Task 1.7**: [DB] (Optional) Create seed data for testing âœ…
  - Add 15-20 sample tours with variety in:
    - Prices ($200-$3000)
    - Difficulties (Easy, Moderate, Challenging)
    - Locations (different countries)
    - Ratings (3.5-5.0)
    - Featured flag (3-4 featured tours)
  - **Estimated**: 1 hour

---

## Phase 2: Backend - Module Setup (1-2 hours)

### 2.1 Module Structure

- [x] **Task 2.1**: [BE] Create `apps/server/src/modules/tours/` folder structure âœ… (Already exists from admin-tours)
  ```
  tours/
  â”œâ”€â”€ tours.module.ts
  â”œâ”€â”€ tours.controller.ts
  â”œâ”€â”€ tours.service.ts
  â”œâ”€â”€ tours.service.spec.ts
  â””â”€â”€ dto/
  ```
  - **Estimated**: 10 min

- [x] **Task 2.2**: [BE] Create `tours.module.ts` âœ… (Updated to include public service/controller)
  - Import `PrismaModule`
  - Register `ToursController` and `ToursService`
  - Export `ToursService` for use by other modules
  - **Estimated**: 15 min

- [x] **Task 2.3**: [BE] Register `ToursModule` in `AppModule` âœ… (Already registered)
  - Add import in `apps/server/src/app.module.ts`
  - Verify module loads correctly on server start
  - **Estimated**: 10 min

---

## Phase 3: Backend - DTOs (2-3 hours)

### 3.1 Request DTOs

- [x] **Task 3.1**: [BE] Create `apps/server/src/modules/tours/dto/get-tours-public.dto.ts` âœ…
  - [x] Define `SortOption` enum (popular, newest, price_asc, price_desc, rating) âœ…
  - [x] Define `DifficultyFilter` enum (easy, moderate, challenging) âœ…
  - [x] Create `GetToursDto` class with validation âœ…
  - [x] Add `@ApiProperty` decorators for Swagger docs âœ…
  - [x] Add `class-validator` decorators âœ…
  - [x] Add `class-transformer` decorators (@Type) âœ…
  - **Estimated**: 1 hour

### 3.2 Response DTOs

- [x] **Task 3.2**: [BE] Create `apps/server/src/modules/tours/dto/tour-public-response.dto.ts` âœ…
  - [x] Create `TourItemDto` class with all tour fields âœ…
  - [x] Create `PaginationDto` class âœ…
  - [x] Create `ToursResponseDto` wrapper class âœ…
  - [x] Add `@ApiProperty` decorators for Swagger âœ…
  - **Estimated**: 45 min

- [x] **Task 3.3**: [BE] Create `apps/server/src/modules/tours/dto/tour-suggestion.dto.ts` âœ…
  - [x] Create `GetSuggestionsDto` class âœ…
  - [x] Create `SuggestionItemDto` class âœ…
  - [x] Create `SuggestionsResponseDto` wrapper âœ…
  - [x] Add validation and API decorators âœ…
  - **Estimated**: 30 min

---

## Phase 4: Backend - Service Layer (4-5 hours)

### 4.1 Core Service Methods

- [x] **Task 4.1**: [BE] Create `tours-public.service.ts` - Implement `getTours()` method âœ…
  - [x] Inject `PrismaService` in constructor âœ…
  - [x] Parse pagination params (page, limit, skip) âœ…
  - [x] Build `where` clause using `buildWhereClause()` helper âœ…
  - [x] Build `orderBy` clause using `buildOrderBy()` helper âœ…
  - [x] Execute parallel queries (Promise.all) âœ…
  - [x] Include `schedules` relation for next available date âœ…
  - [x] Calculate pagination metadata (totalPages, hasNext, hasPrev) âœ…
  - [x] Map results using `mapTourToDto()` helper âœ…
  - [x] Add logging for debugging âœ…
  - **Estimated**: 2 hours

- [x] **Task 4.2**: [BE] Implement `getFeaturedTours()` method âœ…
  - [x] Query tours with `featured: true` âœ…
  - [x] Order by `ratingAverage` desc, then `reviewCount` desc âœ…
  - [x] Apply limit parameter âœ…
  - [x] Map to TourItemDto âœ…
  - [x] Add error handling âœ…
  - **Estimated**: 30 min

- [x] **Task 4.3**: [BE] Implement `getSuggestions()` method âœ…
  - [x] Query matching tours (name OR location contains query) âœ…
  - [x] Query distinct locations matching query âœ…
  - [x] Combine results with type indicators âœ…
  - [x] Limit total suggestions âœ…
  - [x] Return formatted suggestions array âœ…
  - **Estimated**: 45 min

### 4.2 Helper Methods

- [x] **Task 4.4**: [BE] Implement `buildWhereClause()` private method âœ…
  - [x] Handle search filter (OR across name, location, summary) âœ…
  - [x] Handle price range filter (gte, lte on priceAdult) âœ…
  - [x] Handle difficulty filter (exact match, case-insensitive) âœ…
  - [x] Handle location filter (contains, case-insensitive) âœ…
  - [x] Handle duration filter using `parseDurationRange()` âœ…
  - [x] Return typed `Prisma.TourWhereInput` âœ…
  - **Estimated**: 1 hour

- [x] **Task 4.5**: [BE] Implement `buildOrderBy()` private method âœ…
  - [x] Switch on `SortOption` enum âœ…
  - [x] Handle 'popular' (reviewCount desc, ratingAverage desc) âœ…
  - [x] Handle 'newest' (createdAt desc) âœ…
  - [x] Handle 'price_asc' (priceAdult asc) âœ…
  - [x] Handle 'price_desc' (priceAdult desc) âœ…
  - [x] Handle 'rating' (ratingAverage desc) âœ…
  - [x] Return typed `Prisma.TourOrderByWithRelationInput` âœ…
  - **Estimated**: 30 min

- [x] **Task 4.6**: [BE] Implement `parseDurationRange()` private method âœ…
  - [x] Parse "1-3" format (gte min, lte max) âœ…
  - [x] Parse "8+" format (gte min) âœ…
  - [x] Handle edge cases (invalid format) âœ…
  - [x] Return `Prisma.IntFilter | undefined` âœ…
  - **Estimated**: 20 min

- [x] **Task 4.7**: [BE] Implement `mapTourToDto()` private method âœ…
  - [x] Map all fields from Prisma Tour to TourItemDto âœ…
  - [x] Convert Decimal to Number (priceAdult, priceChild, ratingAverage) âœ…
  - [x] Lowercase difficulty enum âœ…
  - [x] Handle optional fields (null coalescing) âœ…
  - [x] Format nextAvailableDate (ISO string) âœ…
  - **Estimated**: 20 min

---

## Phase 5: Backend - Controller Layer (1 hour)

### 5.1 REST Endpoints

- [x] **Task 5.1**: [BE] Create `tours-public.controller.ts` âœ…
  - [x] Add `@Controller('tours')` decorator âœ…
  - [x] Add `@ApiTags('tours')` for Swagger âœ…
  - [x] Add `@Public()` decorator for unauthenticated access âœ…
  - [x] Inject `ToursPublicService` in constructor âœ…
  - **Estimated**: 10 min

- [x] **Task 5.2**: [BE] Add `GET /tours` endpoint âœ…
  - [x] Add `@Get()` decorator âœ…
  - [x] Use `@Query()` decorator with `GetToursPublicDto` âœ…
  - [x] Call `toursPublicService.getTours(dto)` âœ…
  - [x] Return wrapped response: `{ success: true, data: ... }` âœ…
  - [x] Add `@ApiOperation` and `@ApiResponse` decorators âœ…
  - **Estimated**: 20 min

- [x] **Task 5.3**: [BE] Add `GET /tours/featured` endpoint âœ…
  - [x] Add `@Get('featured')` decorator âœ…
  - [x] Accept optional `limit` query param âœ…
  - [x] Call `toursPublicService.getFeaturedTours(limit)` âœ…
  - [x] Return wrapped response âœ…
  - [x] Add Swagger decorators âœ…
  - **Estimated**: 15 min

- [x] **Task 5.4**: [BE] Add `GET /tours/suggestions` endpoint âœ…
  - [x] Add `@Get('suggestions')` decorator âœ…
  - [x] Use `@Query()` with `GetSuggestionsDto` âœ…
  - [x] Call `toursPublicService.getSuggestions(dto)` âœ…
  - [x] Return wrapped response âœ…
  - [x] Add Swagger decorators âœ…
  - **Estimated**: 15 min

---

## Phase 6: Backend - Testing (3-4 hours)

### 6.1 Unit Tests

- [x] **Task 6.1**: [TEST] Create `tours-public.service.spec.ts` - Setup test environment âœ…
  - [x] Create TestingModule with `ToursPublicService` and mock `PrismaService` âœ…
  - [x] Setup beforeEach to get service instance âœ…
  - [x] Create mock data (sample tours) âœ…
  - **Estimated**: 30 min

- [x] **Task 6.2**: [TEST] Write unit tests for `getTours()` âœ…
  - [x] Test: returns paginated tours with default params âœ…
  - [x] Test: filters by search query (name, location) âœ…
  - [x] Test: filters by price range (priceMin, priceMax) âœ…
  - [x] Test: filters by difficulty level âœ…
  - [x] Test: filters by duration range âœ…
  - [x] Test: sorts by price ascending/descending âœ…
  - [x] Test: sorts by rating âœ…
  - [x] Test: sorts by newest (createdAt) âœ…
  - [x] Test: returns empty array when no results âœ…
  - [x] Test: calculates correct pagination metadata âœ…
  - **Estimated**: 2 hours

- [x] **Task 6.3**: [TEST] Write unit tests for `getFeaturedTours()` âœ…
  - [x] Test: returns only tours with featured=true âœ…
  - [x] Test: orders by rating and review count âœ…
  - [x] Test: respects limit parameter âœ…
  - **Estimated**: 30 min

- [x] **Task 6.4**: [TEST] Write unit tests for `getSuggestions()` âœ…
  - [x] Test: returns matching tour names âœ…
  - [x] Test: returns matching destination names âœ…
  - [x] Test: limits total suggestions âœ…
  - [x] Test: uses default limit of 5 âœ…
  - **Estimated**: 30 min

### 6.2 E2E Tests

- [x] **Task 6.5**: [TEST] Create `apps/server/test/tours-public.e2e-spec.ts` âœ…
  - [x] Setup test app with TestingModule âœ…
  - [x] Mock PrismaService with sample tours âœ…
  - **Estimated**: 30 min

- [x] **Task 6.6**: [TEST] Write E2E tests for `GET /tours` âœ…
  - [x] Test: returns 200 with valid response structure âœ…
  - [x] Test: filters by search query âœ…
  - [x] Test: filters by price range (priceMin, priceMax) âœ…
  - [x] Test: filters by difficulty âœ…
  - [x] Test: returns 400 for invalid params (e.g., page=0) âœ…
  - [x] Test: handles empty results gracefully âœ…
  - **Estimated**: 1 hour

- [x] **Task 6.7**: [TEST] Write E2E tests for `GET /tours/featured` and `GET /tours/suggestions` âœ…
  - [x] Test: `/tours/featured` returns featured tours âœ…
  - [x] Test: `/tours/suggestions` returns suggestions âœ…
  - [x] Test: `/tours/suggestions` requires min 2 characters (400 error) âœ…
  - **Estimated**: 30 min

---

## Phase 7: Frontend - Types & API (2 hours)

### 7.1 Type Definitions

- [x] **Task 7.1**: [FE] Create `apps/web/lib/types/tour.ts` âœ…
  - [x] Define `Tour` interface (matching backend TourItemDto) âœ…
  - [x] Define `TourFilters` interface (query params) âœ…
  - [x] Define `Pagination` interface âœ…
  - [x] Define `ToursResponse` interface âœ…
  - [x] Define `TourCardProps` interface âœ…
  - [x] Define `Suggestion` interface âœ…
  - **Estimated**: 30 min

### 7.2 API Client Functions

- [x] **Task 7.2**: [FE] Create `apps/web/lib/api/tours.ts` âœ…
  - [x] Implement `getTours(filters)` function âœ…
    - [x] Build URLSearchParams from filters âœ…
    - [x] Call API with `fetch()` âœ…
    - [x] Add ISR caching: `next: { revalidate: 300 }` âœ…
    - [x] Parse and return `ToursResponse` âœ…
    - [x] Add error handling with try-catch âœ…
  - **Estimated**: 45 min

- [x] **Task 7.3**: [FE] Implement `getFeaturedTours()` function âœ…
  - [x] Call `/tours/featured` endpoint âœ…
  - [x] Add ISR caching: `next: { revalidate: 600 }` âœ…
  - [x] Return Tour array âœ…
  - **Estimated**: 15 min

- [x] **Task 7.4**: [FE] Implement `getSearchSuggestions()` function âœ…
  - [x] Call `/tours/suggestions` endpoint âœ…
  - [x] Use `cache: 'no-store'` (always fresh) âœ…
  - [x] Handle minimum 2 characters âœ…
  - [x] Return Suggestion array âœ…
  - **Estimated**: 15 min

### 7.3 Utility Functions

- [x] **Task 7.5**: [FE] Create `apps/web/lib/utils/format.ts` âœ…
  - [x] Implement `formatCurrency(amount)` - USD formatting âœ…
  - [x] Implement `formatRating(rating)` - 1 decimal place âœ…
  - [x] Implement `formatDuration(days)` - "X Days" format âœ…
  - [x] Implement `getDifficultyColor(difficulty)` - Tailwind classes âœ…
  - **Estimated**: 30 min

---

## Phase 8: Frontend - UI Components (8-10 hours)

### 8.1 Tour Card Components

- [x] **Task 8.1**: [FE] Create `apps/web/components/tours/tour-card.tsx` âœ…
  - [x] Create TourCard component with TourCardProps âœ…
  - [x] Image section with Next.js Image component âœ…
  - [x] Overlay elements (Featured badge, conditional) âœ…
  - [x] Content section with title, rating, metadata, summary, difficulty badge âœ…
  - [x] Footer section with price display and "Book Now" CTA button âœ…
  - [x] Add hover states and transitions âœ…
  - **Estimated**: 2 hours

- [x] **Task 8.2**: [FE] Create `apps/web/components/tours/tour-card-skeleton.tsx` âœ…
  - [x] Create TourCardSkeleton component âœ…
  - [x] Match TourCard structure with shimmer effect âœ…
  - [x] Create TourGridSkeleton component (renders multiple) âœ…
  - [x] Add count prop (default 8) âœ…
  - **Estimated**: 45 min

- [x] **Task 8.3**: [FE] Create `apps/web/components/tours/tour-grid.tsx` âœ…
  - [x] Create TourGrid component accepting tours array âœ…
  - [x] Implement responsive grid (1/2/3/4 columns) âœ…
  - [x] Pass priority=true to first 4 cards (above fold) âœ…
  - [x] Add gap and padding âœ…
  - **Estimated**: 30 min

### 8.2 Filter Components

- [x] **Task 8.4**: [FE] Create `apps/web/components/tours/tour-filters.tsx` (Client Component) âœ…
  - [x] Add `'use client'` directive âœ…
  - [x] Use `useRouter` and `useSearchParams` hooks âœ…
  - [x] Use `useTransition` for pending state âœ…
  - [x] Create filter options arrays âœ…
  - [x] Implement `updateFilter(key, value)` function âœ…
  - [x] Implement `handlePriceChange(value)` function âœ…
  - [x] Render filter dropdowns âœ…
  - [x] Add "Clear Filters" button (conditional) âœ…
  - [x] Style with Tailwind âœ…
  - [x] Handle disabled state during transition âœ…
  - **Estimated**: 2 hours

- [x] **Task 8.5**: [FE] Create `apps/web/components/tours/tour-search.tsx` (Client Component) âœ…
  - [x] Add `'use client'` directive âœ…
  - [x] Use debounced search with setTimeout (300ms) âœ…
  - [x] Use `useState` for input value and suggestions âœ…
  - [x] Use `useEffect` to fetch suggestions on debounced value âœ…
  - [x] Render search input with Search icon âœ…
  - [x] Render suggestions dropdown (conditional) âœ…
  - [x] Handle suggestion click (tour navigation, destination filter) âœ…
  - [x] Handle Enter key (submit search) âœ…
  - [x] Style dropdown with absolute positioning âœ…
  - [x] Add loading state âœ…
  - **Estimated**: 1.5 hours

### 8.3 Pagination Component

- [x] **Task 8.6**: [FE] Create `apps/web/components/tours/tour-pagination.tsx` (Client Component) âœ…
  - [x] Add `'use client'` directive âœ…
  - [x] Accept pagination prop âœ…
  - [x] Use `useRouter` and `useSearchParams` âœ…
  - [x] Render pagination info: "Page X of Y" âœ…
  - [x] Render Previous/Next buttons with disabled states âœ…
  - [x] Render page number buttons âœ…
  - [x] Scroll to top on page change âœ…
  - [x] Add responsive design âœ…
  - **Estimated**: 1.5 hours

### 8.4 State Components

- [x] **Task 8.7**: [FE] Create `apps/web/components/tours/empty-state.tsx` âœ…
  - [x] Display "No tours found" heading âœ…
  - [x] Display descriptive message âœ…
  - [x] Add suggestions list âœ…
  - [x] Add "Clear Filters" button âœ…
  - [x] Style with centered layout âœ…
  - [x] Add illustration or icon âœ…
  - **Estimated**: 30 min

- [x] **Task 8.8**: [FE] Create `apps/web/components/tours/error-state.tsx` âœ…
  - [x] Accept error and onRetry props âœ…
  - [x] Display error icon (AlertCircle) âœ…
  - [x] Display error heading âœ…
  - [x] Display error message (fallback to generic) âœ…
  - [x] Add "Try Again" button âœ…
  - [x] Style with centered layout âœ…
  - **Estimated**: 30 min

### 8.5 Hero Section

- [x] **Task 8.9**: [FE] Create `apps/web/components/tours/hero-section.tsx` âœ…
  - [x] Create HeroSection component âœ…
  - [x] Background image with overlay âœ…
  - [x] Hero content (Main heading, Subtitle text) âœ…
  - [x] Search bar with destination input âœ…
  - [x] Responsive design âœ…
  - [x] Add initialSearch prop to pre-fill search input âœ…
  - **Estimated**: 1.5 hours

---

## Phase 9: Frontend - Pages (2-3 hours)

### 9.1 Home Page

- [x] **Task 9.1**: [FE] Update `apps/web/app/page.tsx` âœ…
  - [x] Add metadata export âœ…
  - [x] Define HomePageProps interface (searchParams) âœ…
  - [x] Parse searchParams into TourFilters âœ…
  - [x] Render main layout with HeroSection, Tours section, TourFiltersBar âœ…
  - [x] Suspense boundary with TourGridSkeleton âœ…
  - [x] ToursContent async component âœ…
  - **Estimated**: 1 hour

- [x] **Task 9.2**: [FE] Implement ToursContent async component âœ…
  - [x] Accept filters prop âœ…
  - [x] Call `await getTours(filters)` âœ…
  - [x] Handle empty state â†’ render EmptyState âœ…
  - [x] Handle error state â†’ render error message âœ…
  - [x] Render results with TourGrid and TourPagination âœ…
  - [x] Wrap in try-catch for error handling âœ…
  - **Estimated**: 45 min

- [x] **Task 9.3**: [FE] Create `apps/web/app/tours/page.tsx` âœ…
  - [x] Created dedicated tours browse page with header and search bar âœ…
  - [x] Same filtering and pagination logic as home page âœ…
  - [x] Added SEO metadata âœ…
  - [x] Integrated TourSearch, TourFiltersBar, ErrorState components âœ…
  - **Estimated**: 30 min

### 9.2 Layout Components

- [ ] **Task 9.4**: [FE] Update `apps/web/components/layout/header.tsx` (if needed)
  - [ ] Ensure "TravelCo" logo links to "/"
  - [ ] Add navigation links (Destinations, About, Contact)
  - [ ] Add auth-based actions (Sign In button / Avatar menu)
  - [ ] Style with sticky positioning
  - **Estimated**: 30 min (if major changes needed)

- [ ] **Task 9.5**: [FE] Update `apps/web/components/layout/footer.tsx` (if needed)
  - [ ] Ensure consistent styling with design
  - [ ] Add newsletter subscribe form
  - [ ] Add social links
  - [ ] Add company info links
  - **Estimated**: 30 min (if major changes needed)

---

## Phase 10: Integration & QA (4-5 hours)

### 10.1 Manual Testing

- [ ] **Task 10.1**: [QA] Test database migration
  - [ ] Verify all new fields added to tours table
  - [ ] Verify indexes created
  - [ ] Verify trigger created for review_count
  - [ ] Test trigger by inserting/deleting reviews
  - **Estimated**: 30 min

- [ ] **Task 10.2**: [QA] Test backend API with Postman/Thunder Client
  - [ ] Test `GET /tours` with no filters
  - [ ] Test `GET /tours` with search filter
  - [ ] Test `GET /tours` with price filters (priceMin, priceMax)
  - [ ] Test `GET /tours` with difficulty filter
  - [ ] Test `GET /tours` with duration filter
  - [ ] Test `GET /tours` with sort options (all 5 types)
  - [ ] Test `GET /tours` with pagination (page 1, 2, 3)
  - [ ] Test `GET /tours` with invalid params (expect 400)
  - [ ] Test `GET /tours/featured`
  - [ ] Test `GET /tours/suggestions?q=ba`
  - [ ] Verify response times (< 200ms target)
  - **Estimated**: 1 hour

- [ ] **Task 10.3**: [QA] Test full frontend flow
  - [ ] Load home page - verify tours display
  - [ ] Test hero section search
  - [ ] Test filter changes (sort, price, difficulty, duration)
  - [ ] Test search functionality
  - [ ] Test pagination (next, previous, page numbers)
  - [ ] Test empty state (apply filters with no results)
  - [ ] Test URL state persistence (copy/paste URL, refresh)
  - [ ] Test tour card links (navigate to detail page)
  - [ ] Test "Clear Filters" button
  - **Estimated**: 1 hour

### 10.2 Responsive Testing

- [ ] **Task 10.4**: [QA] Test responsive design
  - [ ] **Mobile (< 768px)**:
    - 1 column grid
    - Filters horizontal scroll or drawer
    - Hero section stacked layout
    - Search bar full width
  - [ ] **Tablet (768px - 1024px)**:
    - 2 column grid
    - Filters visible, may scroll
  - [ ] **Desktop (1024px - 1280px)**:
    - 3 column grid
    - All filters visible
  - [ ] **Large Desktop (>= 1280px)**:
    - 4 column grid
  - [ ] Test on real devices (iPhone, iPad, Android)
  - [ ] Test on different browsers (Chrome, Safari, Firefox)
  - **Estimated**: 1 hour

### 10.3 Performance & SEO Testing

- [ ] **Task 10.5**: [QA] Run Lighthouse audit
  - [ ] Run on home page
  - [ ] Target scores:
    - Performance: > 90
    - Accessibility: 100
    - Best Practices: 100
    - SEO: > 95
  - [ ] Check Core Web Vitals:
    - LCP < 2.0s
    - FCP < 1.5s
    - TTI < 3.0s
    - CLS < 0.1
  - [ ] Fix any issues found
  - **Estimated**: 1 hour

- [ ] **Task 10.6**: [QA] Verify SEO meta tags
  - [ ] Check page title
  - [ ] Check meta description
  - [ ] Check Open Graph tags (Facebook preview)
  - [ ] Check Twitter Card tags
  - [ ] Verify canonical URL
  - [ ] (Optional) Add JSON-LD structured data
  - [ ] Test with social media preview tools
  - **Estimated**: 30 min

### 10.4 Accessibility Testing

- [ ] **Task 10.7**: [QA] Accessibility audit
  - [ ] Run axe DevTools
  - [ ] Test keyboard navigation:
    - Tab through all interactive elements
    - Test filter dropdowns with keyboard
    - Test pagination with keyboard
  - [ ] Test with screen reader (VoiceOver, NVDA)
  - [ ] Check color contrast (WCAG AA)
  - [ ] Check focus states on all interactive elements
  - [ ] Verify alt text on images
  - [ ] Verify ARIA labels where needed
  - **Estimated**: 1 hour

---

## Phase 11: Deployment Preparation (1-2 hours)

### 11.1 Environment Setup

- [ ] **Task 11.1**: [DEPLOY] Set environment variables
  - [ ] Backend:
    - `DATABASE_URL` (production)
    - `FRONTEND_URL`
  - [ ] Frontend:
    - `NEXT_PUBLIC_API_URL`
  - **Estimated**: 20 min

- [ ] **Task 11.2**: [DEPLOY] Run database migration on staging
  - [ ] Backup production database
  - [ ] Run migration on staging environment
  - [ ] Verify migration success
  - [ ] Test API on staging
  - **Estimated**: 30 min

### 11.2 Documentation

- [ ] **Task 11.3**: [DOCS] Update API documentation
  - [ ] Generate Swagger docs (`/api` endpoint)
  - [ ] Verify all endpoints documented
  - [ ] Add example requests/responses
  - **Estimated**: 30 min

- [ ] **Task 11.4**: [DOCS] Update README
  - [ ] Document new features
  - [ ] Add setup instructions for tours feature
  - [ ] Add troubleshooting section
  - **Estimated**: 20 min

---

## Summary & Metrics

### Task Summary by Phase

| Phase | Tasks | Estimated Time |
|-------|-------|----------------|
| **Phase 1: Database** | 7 tasks | 2-3 hours |
| **Phase 2: Backend Module Setup** | 3 tasks | 1-2 hours |
| **Phase 3: Backend DTOs** | 3 tasks | 2-3 hours |
| **Phase 4: Backend Service** | 7 tasks | 4-5 hours |
| **Phase 5: Backend Controller** | 4 tasks | 1 hour |
| **Phase 6: Backend Testing** | 7 tasks | 3-4 hours |
| **Phase 7: Frontend Types & API** | 5 tasks | 2 hours |
| **Phase 8: Frontend Components** | 9 tasks | 8-10 hours |
| **Phase 9: Frontend Pages** | 5 tasks | 2-3 hours |
| **Phase 10: Integration & QA** | 7 tasks | 4-5 hours |
| **Phase 11: Deployment** | 4 tasks | 1-2 hours |
| **TOTAL** | **61 tasks** | **30-40 hours** |

### Dependencies Graph

```
Phase 1 (Database)
    â””â”€â”€ Must complete before Phase 2-6

Phase 2-6 (Backend)
    â”œâ”€â”€ Phase 2 (Module) â†’ Phase 3 (DTOs) â†’ Phase 4 (Service) â†’ Phase 5 (Controller)
    â””â”€â”€ Phase 6 (Testing) can run parallel with Phase 4-5

Phase 7 (FE Types & API)
    â””â”€â”€ Can start parallel with Phase 2-6

Phase 8-9 (Frontend)
    â”œâ”€â”€ Phase 7 must be complete
    â””â”€â”€ Phase 8 (Components) â†’ Phase 9 (Pages)

Phase 10 (Integration & QA)
    â””â”€â”€ Requires Phase 1-9 complete

Phase 11 (Deployment)
    â””â”€â”€ Requires Phase 10 complete
```

### Critical Path

The critical path (longest sequence of dependent tasks):

1. **Database Migration** (Phase 1) - 3 hours
2. **Backend Service Implementation** (Phase 4) - 5 hours
3. **Frontend Components** (Phase 8) - 10 hours
4. **Frontend Pages** (Phase 9) - 3 hours
5. **Integration & QA** (Phase 10) - 5 hours

**Total Critical Path**: ~26 hours

### Recommended Sprint Planning

**Sprint 1 (Week 1)**:
- Phase 1: Database (all tasks)
- Phase 2-3: Backend setup and DTOs
- Phase 4: Start Service implementation

**Sprint 2 (Week 2)**:
- Phase 4: Complete Service implementation
- Phase 5: Controller implementation
- Phase 6: Backend testing
- Phase 7: Frontend types and API

**Sprint 3 (Week 3)**:
- Phase 8: Frontend components
- Phase 9: Frontend pages
- Phase 10: Start integration testing

**Sprint 4 (Week 4)**:
- Phase 10: Complete QA
- Phase 11: Deployment preparation
- Buffer time for bug fixes

---

## Notes & Best Practices

### Development Tips

1. **Use TypeScript strict mode** - Catch errors early
2. **Write tests alongside code** - Don't leave testing for the end
3. **Test on mobile early** - Don't wait until the end for responsive testing
4. **Use feature flags** - Deploy behind feature flag if unsure about stability
5. **Monitor performance** - Use Lighthouse CI in your pipeline

### Common Pitfalls to Avoid

1. **Forgetting indexes** - Will cause slow queries in production
2. **Not handling edge cases** - Empty states, error states, loading states
3. **Poor mobile UX** - Filters must be usable on small screens
4. **SEO mistakes** - Missing meta tags, poor URL structure
5. **Accessibility issues** - Test with keyboard and screen reader

### Quick Start Commands

```bash
# Database migration
cd apps/server
pnpm prisma migrate dev --name add_tour_overview_fields
pnpm prisma generate

# Install frontend dependencies
cd apps/web
pnpm add use-debounce

# Backend development
cd apps/server
pnpm dev

# Frontend development
cd apps/web
pnpm dev

# Run backend tests
cd apps/server
pnpm test              # Unit tests
pnpm test:e2e          # E2E tests

# Run frontend tests
cd apps/web
pnpm test

# Lint and format
pnpm lint
pnpm format
```

---

**Task Breakdown Status**: âœ… Complete
**Implementation Status**: ðŸŸ¢ All Core Phases Complete (1-9)
**Test Coverage**: Unit tests (24 passing), E2E tests (15 passing)
**Optional Remaining**: Tasks 9.4, 9.5 (Header/Footer updates), Phase 10-11 (QA/Deploy)
**Questions?**: Refer to TDD document or contact tech lead
